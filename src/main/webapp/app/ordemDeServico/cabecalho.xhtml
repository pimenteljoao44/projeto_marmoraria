<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


    <p:panelGrid columns="2" layout="grid" style="margin-bottom: 10px;">

        <p:outputLabel value="Data de Criação:" for="dataCriacao"/>
        <p:calendar id="dataCriacao"
                    pattern="dd/MM/yyyy HH:mm:ss" disabled="true"
                    value="#{ordemDeServicoControle.ordemDeServico.dataCriacao}"/>

        <p:outputLabel value="Data de finalização:" for="dataFinalizacao"/>
        <p:calendar id="dataFinalizacao"
                    pattern="dd/MM/yyyy HH:mm:ss"
                    value="#{ordemDeServicoControle.ordemDeServico.dataFinalizacao}"/>

        <p:outputLabel value="Cliente:" for="cliente"/>
        <h:panelGroup>
            <p:autoComplete id="cliente"
                            value="#{ordemDeServicoControle.ordemDeServico.cliente}"
                            converter="#{pessoaControle.converter()}"
                            completeMethod="#{pessoaControle.pessoaAutoComplete}"
                            var="cliente"
                            itemValue="#{cliente}"
                            itemLabel="#{cliente.nome}"
                            required="true"
                            requiredMessage="O campo cliente é obrigatório"/>
            <p:focus for="cliente" rendered="#{ordemDeServicoControle.ordemDeServico.cliente == null}"/>
        </h:panelGroup>

        <p:outputLabel value="Desconto:" for="desconto"/>
        <p:inputText id="desconto" value="#{ordemDeServicoControle.ordemDeServico.desconto}">
            <f:convertNumber minFractionDigits="2"
                             maxFractionDigits="2"/>
            <f:ajax event="keyup" listener="#{ordemDeServicoControle.ordemDeServico.calculaTotal()}"
                    render="total"/>
        </p:inputText>

        <p:outputLabel value="Total:" for="total"/>
        <p:inputText id="total"
                     value="#{ordemDeServicoControle.ordemDeServico.valorTotal}"
                     readonly="true">
            <f:convertNumber minFractionDigits="2"
                             maxFractionDigits="2"
                             type="currency"
                             currencySymbol="R$"/>
        </p:inputText>

    </p:panelGrid>

</html>
